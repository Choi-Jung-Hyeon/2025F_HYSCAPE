# 수소 뉴스 자동 브리핑 시스템 v2.1 - 설치 및 사용 가이드

## 📦 1. 필수 라이브러리 설치

```bash
pip install -r requirements.txt
```

설치되는 라이브러리:
- `google-generativeai`: Gemini AI API
- `feedparser`: RSS 피드 파싱
- `newspaper3k`: 뉴스 기사 본문 추출
- `requests`, `beautifulsoup4`, `lxml`: 웹 크롤링
- `PyPDF2`: PDF 파일 읽기

---

## 🔧 2. config.py 설정

`config.py` 파일을 열고 다음 정보를 입력하세요:

### 필수 설정
```python
# Google Gemini API 키 (https://aistudio.google.com/app/apikey)
GOOGLE_API_KEY = "여기에_발급받은_API_키_입력"

# Gmail 발송 정보
SENDER_EMAIL = "본인의_Gmail@gmail.com"
SENDER_PASSWORD = "Gmail_앱_비밀번호"  # 2단계 인증 필수

# 수신자 목록
RECEIVER_EMAIL = [
    "수신자1@example.com",
    "수신자2@example.com"
]
```

### 선택 설정
```python
# 기사 수집 제한
MAX_ARTICLES_PER_SOURCE = 5  # 소스당 최대 5개
MAX_TOTAL_ARTICLES = 15      # 전체 최대 15개

# PDF 파일 경로
PDF_FILE_PATH = "250925_일간수소 이슈 브리핑.pdf"
```

---

## 📄 3. PDF 파일 준비 (선택사항)

월간수소경제 브리핑 PDF를 분석하고 싶다면:

1. PDF 파일을 `version4` 디렉토리에 저장
2. `config.py`의 `PDF_FILE_PATH`에 파일명 입력
3. 시스템이 자동으로 PDF를 읽고 키워드를 추출합니다

---

## 🚀 4. 실행 방법

### 방법 1: 전체 시스템 실행
```bash
python main.py
```

### 방법 2: 모듈별 단위 테스트

#### 뉴스 소스 수집 테스트
```bash
python source_fetcher.py
```

#### PDF 리더 테스트
```bash
python pdf_reader.py
```

#### 본문 추출 테스트
```bash
python content_scraper.py
```

---

## 📊 5. 실행 결과 예시

```
==================================================================
🚀 수소 뉴스 브리핑 시스템 v2.1 시작
⏰ 실행 시간: 2025-10-16 09:00:00
==================================================================

[단계 0] PDF 브리핑 파일을 처리합니다...
[PDF 리더] PDF 파일을 읽습니다: 250925_일간수소 이슈 브리핑.pdf
  📄 총 5페이지를 읽습니다...
  ✅ 텍스트 추출 완료 (12450자)
  ✅ 15개의 키워드를 추출했습니다.

[단계 1] 뉴스 소스에서 기사를 수집합니다...
============================================================
뉴스 소스 수집을 시작합니다
============================================================
[월간수소경제] RSS 피드를 수집합니다
  ✅ 10개의 기사를 찾았습니다.
[Hydrogen Insight] RSS 피드를 수집합니다
  ✅ 8개의 기사를 찾았습니다.
[네이버뉴스(수소)] 네이버 뉴스를 검색합니다
  ✅ 10개의 기사를 찾았습니다.

총 28개의 기사를 수집했습니다
============================================================

[단계 2] 총 15개 기사를 처리합니다...
[1/15] 처리 중: 삼성중공업 수소 연료전지 선박...
  ├─ 본문 추출 중... ✅ 성공 (2450자)
  ├─ AI 요약 중... ✅ 성공
  └─ ✅ 완료 (1/15)

[단계 3] 이메일을 발송합니다...
  ✅ 이메일 발송 완료!

==================================================================
✨ 모든 작업을 완료했습니다!
==================================================================
```

---

## ⚠️ 6. 문제 해결 가이드

### 문제 1: 특정 뉴스 소스 접속 실패

**증상**: `❌ 연결 오류` 또는 `❌ 타임아웃`

**원인**:
- RSS 피드 URL이 변경되었거나 만료됨
- 웹사이트에서 봇 접근 차단
- 네트워크 문제

**해결 방법**:
1. 웹브라우저에서 해당 RSS URL 직접 접속 확인
2. `config.py`에서 해당 소스 제거 또는 URL 업데이트
3. VPN 사용 시도

### 문제 2: PDF 파일 읽기 실패

**증상**: `❌ 파일을 찾을 수 없습니다`

**해결 방법**:
1. PDF 파일이 `version4` 디렉토리에 있는지 확인
2. `config.py`의 `PDF_FILE_PATH`가 정확한지 확인
3. 파일 경로에 한글이 포함된 경우 영문으로 변경

### 문제 3: Gmail 발송 실패

**증상**: `Authentication failed`

**해결 방법**:
1. Gmail 2단계 인증 설정 확인
2. '앱 비밀번호' 새로 생성 (16자리)
3. `SENDER_PASSWORD`에 정확히 입력 (공백 없이)

---

## 📌 7. 추가 기능

### 네이버 뉴스 키워드 추가
```python
# config.py
NAVER_NEWS_KEYWORDS = ["수소", "수전해", "연료전지", "그린수소", "청정수소"]
```

### 뉴스 소스 추가
```python
# config.py
NEWS_SOURCES = {
    "기존소스": "URL",
    "새로운소스": "https://example.com/rss"
}
```

---

## 🔄 8. 자동 실행 (Cron)

매일 오전 8시에 자동 실행하려면:

```bash
# crontab 편집
crontab -e

# 아래 라인 추가
0 8 * * * cd /path/to/version4 && /path/to/venv/bin/python main.py
```

---

## 📧 문의 및 지원

문제가 계속되면 다음 정보와 함께 문의하세요:
- 오류 메시지 전체
- `config.py` 설정 (비밀번호 제외)
- Python 버전: `python --version`